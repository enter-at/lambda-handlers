dist: xenial # required for Python >= 3.7
language: python
python:
  - "3.7"

install:
  - pip install -U pip setuptools
  - pip install pipenv
  - pipenv install --dev
  - pipenv run python setup.py develop

script: |
  - tox -e lint
  - tox -e isort
  - tox -e mypy
deploy:
  - provider: pypi
    twine_version: 1.12.1
    distributions: sdist bdist_wheel
    user: $TEST_PYPI_USER
    password: $TEST_PYPI_PASS
    server: https://test.pypi.org/legacy/
    on:
      tags: true
      python: 3.7
      condition: $TRAVIS_PYTHON_VERSION = "3.7"
      repo: enter-at/lambda-handlers
